(this["webpackJsonpsite-xml-read"]=this["webpackJsonpsite-xml-read"]||[]).push([[0],{16:function(e,a,t){"use strict";t.r(a);var n=t(1),r=t(8),c=t.n(r),i=t(0),o=function(){return Object(i.jsx)("nav",{className:"navbar navbar-expand-lg navbar-dark bg-dark",children:Object(i.jsx)("div",{className:"container-fluid",children:Object(i.jsx)("div",{className:"navbar-brand",children:"XML Reader"})})})},s=t(9),d=t(3),l=t.n(d),b=t(7),j=t(5),u=function(){var e=Object(n.useState)(!1),a=Object(j.a)(e,2),t=a[0],r=a[1],c=Object(n.useState)([]),o=Object(j.a)(c,2),d=o[0],u=o[1],m=Object(n.useState)("FileGenerated.ini"),p=Object(j.a)(m,2),x=p[0],v=p[1],h=function(e,a){var t="",n=a.Descripcion.replace(/(\n)/g," ");return t+="[".concat(e,"]"),t+="\n",t+="BienesTransp=".concat(a.BienesTransp),t+="\n",t+="Descripcion=".concat(n),t+="\n",t+="Cantidad=".concat(a.Cantidad),t+="\n",t+="ClaveUnidad=".concat(a.ClaveUnidad),t+="\n",t+="Unidad=".concat(a.Unidad),t+="\n",t+="CveMaterialPeligroso=".concat(a.CveMaterialPeligroso),t+="\n",t+="Embalaje=".concat(a.Embalaje),t+="\n",t+="DescripEmbalaje=".concat(a.DescripEmbalaje),t+="\n",t+="PesoEnKg=".concat(a.PesoEnKg),t+="\n",t+="ValorMercancia=".concat(a.ValorMercancia),t+="\n",t+="Moneda=".concat(a.Moneda),t+="\n",t+="FraccionArancelaria=".concat(a.FraccionArancelaria),t+="\n",t+="UUIDComercioExt=".concat(a.UUIDComercioExt),t+="\n",(t+="Pedimentos=".concat(a.Pedimentos))+"\n"},f=function(){var e=Object(b.a)(l.a.mark((function e(){var a,t,n,c,i,o,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(a="",t=0;t<d.length;t++)a+=h(t,d[t]);n=(new Date).getTime(),c=new Blob([a],{type:"text/plain;charset=utf-8;"}),i=x,console.log(i.split(".")[0]),navigator.msSaveBlob?(navigator.msSaveBlob(c,"".concat(x.split(".")[0],"_").concat(n,".").concat(x.split(".")[1])),u([])):void 0!==(o=document.createElement("a")).download&&(s=URL.createObjectURL(c),o.setAttribute("href",s),o.setAttribute("download","".concat(x.split(".")[0],"_").concat(n,".").concat(x.split(".")[1])),o.style.visibility="hidden",document.body.appendChild(o),o.click(),document.body.removeChild(o),u([]),r(!1));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){v(function(e,a){var t=localStorage.getItem(e);return JSON.parse(t)||a}("nameFile",x))}),[x]),Object(i.jsxs)(i.Fragment,{children:[Object(i.jsxs)("div",{className:"card text-white bg-secondary mb-3",children:[Object(i.jsx)("div",{className:"card-header",children:"\xc1rea de Archivos"}),Object(i.jsx)("div",{className:"card-body",children:Object(i.jsx)("div",{style:t?{color:"#fff",padding:"50px",backgroundColor:"rgba(255,255,255,0.4)",borderColor:"rgba(255,255,255,0.9)",borderStyle:"dashed",borderWidth:"thick",fontSize:"3.5rem",textAlign:"center",fontWeight:"bold"}:{color:"#000",padding:"50px",backgroundColor:"rgba(255,255,255,0.2)",borderColor:"rgba(24,24,24,0.3)",borderStyle:"dashed",borderWidth:"thick",fontSize:"3.5rem",textAlign:"center",fontWeight:"bold"},onDragEnter:function(){r(!0)},onDragLeave:function(){r(!1)},onDragOver:function(e){e.preventDefault()},onDrop:function(e){e.preventDefault(),Array.from(e.dataTransfer.files).filter((function(e){return"text/xml"===e.type})).forEach(function(){var e=Object(b.a)(l.a.mark((function e(a){var t,n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.text();case 2:t=e.sent,n=t,r=new DOMParser,r.parseFromString(n,"application/xml").activeElement.children[2].childNodes.forEach((function(e){if("cfdi:Concepto"===e.nodeName){var a={BienesTransp:e.attributes.ClaveProdServ.nodeValue,Descripcion:e.attributes.Descripcion.nodeValue,Cantidad:e.attributes.Cantidad.nodeValue,ClaveUnidad:e.attributes.ClaveUnidad.nodeValue,Unidad:e.attributes.Unidad.nodeValue,CveMaterialPeligroso:"",Embalaje:"",DescripEmbalaje:"",PesoEnKg:"",ValorMercancia:"",Moneda:"",FraccionArancelaria:"",UUIDComercioExt:"",Pedimentos:""};u((function(e){return[].concat(Object(s.a)(e),[a])}))}}));case 7:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}())},onClick:function(e){e.preventDefault()},children:"Coloca aqu\xed tu archivo"})})]}),Object(i.jsxs)("div",{className:"w100",children:[Object(i.jsx)("label",{htmlFor:"nameFile",children:"Nombre para archivo generado"}),Object(i.jsx)("input",{type:"text",id:"nameFile",className:"form-control mb-3",placeholder:"Default: "+x.split(".")[0],onInput:function(e){var a=e.target.value;a=a.replace(/ /g,"_"),v("".concat(a,".ini")),localStorage.setItem("nameFile",JSON.stringify("".concat(a,".ini")))}}),Object(i.jsx)("div",{className:"d-grid gap-2",children:Object(i.jsx)("button",{className:"btn btn-info btn",onClick:function(){return f()},disabled:!d.length>0,children:"Generar Archivo"})})]}),d.length>0&&Object(i.jsxs)("div",{className:"card text-white bg-primary mb-3 mt-3",children:[Object(i.jsx)("div",{className:"card-header",children:"Vista previa"}),Object(i.jsx)("div",{className:"card-body",children:Object(i.jsx)("div",{className:"card-text bg-light text-secondary",children:Object(i.jsx)("ul",{children:d.map((function(e,a){return Object(i.jsxs)("li",{style:{listStyleType:"none"},children:["[",a,"]",Object(i.jsx)("br",{}),"BienesTransp=",e.BienesTransp,Object(i.jsx)("br",{}),"Descripcion=",e.Descripcion,Object(i.jsx)("br",{}),"Cantidad=",e.Cantidad,Object(i.jsx)("br",{}),"ClaveUnidad=",e.ClaveUnidad,Object(i.jsx)("br",{}),"Unidad=",e.Unidad,Object(i.jsx)("br",{}),"CveMaterialPeligroso=",e.CveMaterialPeligroso,Object(i.jsx)("br",{}),"Embalaje=",e.Embalaje,Object(i.jsx)("br",{}),"DescripEmbalaje=",e.DescripEmbalaje,Object(i.jsx)("br",{}),"PesoEnKg=",e.PesoEnKg,Object(i.jsx)("br",{}),"ValorMercancia=",e.ValorMercancia,Object(i.jsx)("br",{}),"Moneda=",e.Moneda,Object(i.jsx)("br",{}),"FraccionArancelaria=",e.FraccionArancelaria,Object(i.jsx)("br",{}),"UUIDComercioExt=",e.UUIDComercioExt,Object(i.jsx)("br",{}),"Pedimentos=",e.Pedimentos,Object(i.jsx)("br",{})]},a)}))})})})]})]})},m=function(){return Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)(o,{}),Object(i.jsx)("div",{className:"container mt-4",children:Object(i.jsx)(u,{})})]})};var p=function(){return Object(i.jsx)(m,{})};c.a.render(Object(i.jsx)(p,{}),document.getElementById("root"))}},[[16,1,2]]]);
//# sourceMappingURL=main.cd32a7cd.chunk.js.map