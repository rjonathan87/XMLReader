{"version":3,"sources":["context/UserContext.js","services/login.js","hooks/useUser.js","components/Ui/Navbar.js","components/Auth/Login.js","components/Auth/Register.js","css/styles.js","utils/Functions.js","components/XMLReader.js","components/ReadXML.js","App.js","index.js"],"names":["Context","React","createContext","UserContextProvider","children","useState","jwt","setJWT","Provider","value","loginService","a","username","password","fetch","method","headers","body","JSON","stringify","user","res","ok","Error","json","res_2","token","useUser","useContext","loading","error","state","setState","login","useCallback","then","catch","logout","isLogged","Boolean","isLoginLoading","hasLoginError","Navbar","className","style","outline","to","onClick","Login","setUsername","setPassword","navigate","useNavigate","useEffect","onSubmit","e","preventDefault","htmlFor","type","id","placeholder","onChange","target","role","Register","mystyle1","color","padding","backgroundColor","borderColor","borderStyle","borderWidth","fontSize","textAlign","fontWeight","mystyle2","processRow","i","row","finalVal","convertDescription","Descripcion","replace","BienesTransp","Cantidad","ClaveUnidad","Unidad","CveMaterialPeligroso","Embalaje","DescripEmbalaje","PesoEnKg","ValorMercancia","Moneda","FraccionArancelaria","UUIDComercioExt","Pedimentos","XMLReader","highlighted","setHighlighted","conceptos","setConceptos","nameFile","setNameFile","key","localStorage","getItem","generateFile","csvFile","length","time","Date","getTime","blob","Blob","nameFileSaved","console","log","split","navigator","msSaveBlob","undefined","link","document","createElement","download","url","URL","createObjectURL","setAttribute","visibility","appendChild","click","removeChild","onDrop","files","Array","from","filter","file","forEach","text","xmlContent","parser","DOMParser","parseFromString","activeElement","childNodes","elNode","nodeName","nodoActual","attributes","nodeValue","onDragEnter","onDragLeave","onDragOver","dataTransfer","getElementById","onInput","setItem","display","multiple","disabled","map","concepto","listStyleType","ReadXML","path","element","App","ReactDOM","render"],"mappings":"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","file":"static/js/main.1f3a319b.chunk.js","sourcesContent":["import React, { useState } from 'react'\n\nconst Context = React.createContext({})\n\nexport const UserContextProvider = ({children}) => {\n  const [jwt, setJWT] = useState(null);\n\n  return <Context.Provider value={{jwt, setJWT}}>\n    {children}\n  </Context.Provider>\n}\n\nexport default Context","const ENDPOINT = 'http://209.126.12.58/api/backendxmlreader'\n\nconst loginService = async ({username, password}) => {\n  const res = await fetch(`${ENDPOINT}/login`, {\n    method: 'POST',\n    headers: {\n      \"Content-Type\": \"application/json\"\n    },\n    body: JSON.stringify({ user: username, password: password })\n  })\n  if (!res.ok)\n    throw new Error('Response is not ok!')\n  const res_2 = await res.json()\n  const { token } = res_2\n  return token\n}\n\nexport default loginService","import { useCallback, useContext, useState } from \"react\";\nimport Context from \"../context/UserContext\";\nimport loginService from \"../services/login\";\n\nexport const useUser = () => {\n  const {jwt, setJWT} = useContext(Context)\n  const [state, setState] = useState({\n    loading: false,\n    error: false\n  })\n\n  const login = useCallback(({username, password}) => {\n\n    setState({loading: true, error: false})\n\n    loginService({username, password})\n    .then( jwt => {\n      setState({loading: false, error: false})\n      setJWT(jwt)\n    })\n    .catch( error => {\n      setState({loading: false, error: true})\n    } )\n  }, [setJWT])\n\n  const logout = useCallback(() => {\n    setJWT(null)\n  }, [setJWT])\n\n  return {\n    isLogged: Boolean(jwt),\n    isLoginLoading: state.loading,\n    hasLoginError: state.error,\n    login,\n    logout\n  }\n}","import { Link } from \"react-router-dom\";\nimport { useUser } from \"../../hooks/useUser\";\n\nexport const Navbar = () => {\n\n  const { isLogged, logout } = useUser()\n  \n  return (\n    <nav className=\"navbar navbar-expand-lg navbar-dark bg-dark\">\n      <div className=\"container-fluid\">\n        <div className=\"navbar-brand\" >\n          <Link \n            className=\"link-light \" \n            style={{outline: 'none'}}\n            to='/'>\n            XML Reader\n          </Link>\n        </div>\n\n        <div className=\"d-flex justify-content-end\">\n          <ul className=\"navbar-nav me-auto mb-2 mb-lg-0\">\n            <li className=\"nav-item\">\n              {\n                isLogged \n                ?\n                  <Link \n                    className=\"nav-link active btn btn-link\" \n                    to='#'\n                    onClick={() => logout()}\n                  >\n                    Logout\n                  </Link>\n                : \n                  <Link \n                    className=\"nav-link active btn btn-link\" \n                    to='login'\n                  >\n                    Login\n                  </Link>\n              }\n            </li>\n          </ul>\n        </div>\n      </div>\n    </nav>\n  );\n};\n","import { useEffect, useState } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport { useUser } from \"../../hooks/useUser\";\n\nexport const Login = () => {\n  const [username, setUsername] = useState('')\n  const [password, setPassword] = useState('')\n  const { login, isLogged, isLoginLoading, hasLoginError } = useUser()\n\n  const navigate = useNavigate();\n\n  useEffect(() => {\n    if(isLogged) { navigate(\"/\")  }\n    // console.log(isLogged)\n  }, [isLogged, navigate])\n\n  const handleSubmit = e => {\n    e.preventDefault();\n    // alert(`${username} ${password}`)\n    login({username, password})\n  }\n\n  return (\n    <>\n      {\n        isLoginLoading && <strong>Verificando credenciales...</strong>\n      }\n\n      {\n        !isLoginLoading && \n          <form onSubmit={ handleSubmit } >\n            <div className=\"card mb-3\">\n              <div className=\"card-body\">\n                <div className=\"mb-3\">\n                  <label htmlFor=\"username\" className=\"form-label\">\n                    Usuario\n                  </label>\n                  <input\n                    type=\"text\"\n                    className=\"form-control\"\n                    id=\"username\"\n                    placeholder=\"Usuario\"\n                    onChange={ e => setUsername(e.target.value) }\n                    value={ username }\n                  />\n                </div>\n                <div className=\"mb-3\">\n                  <label htmlFor=\"password\" className=\"form-label\">\n                    Contraseña\n                  </label>\n                  <input\n                    type=\"password\"\n                    className=\"form-control\"\n                    id=\"password\"\n                    placeholder=\"password\"\n                    onChange={ e => setPassword(e.target.value) }\n                    value={ password }\n                  />\n                </div>\n                <button className=\"btn btn-success\" >Entrar</button>\n              </div>\n            </div>\n          </form>\n      }\n\n      {\n        hasLoginError && \n        <div className=\"alert alert-danger\" role=\"alert\">\n          <strong>Credenciales no válidas!!!</strong>\n        </div>\n      }\n    </>\n  );\n};\n","export const Register = () => {\n  return (\n    <div>\n      Register\n    </div>\n  )\n}\n","const styles = {\n  anchorNoStyle:{\n    outline: 'none',\n  }\n}\nconst mystyle1 = {\n  color: \"#fff\",\n  padding: \"50px\",\n  backgroundColor: \"rgba(255,255,255,0.4)\",\n  borderColor: \"rgba(255,255,255,0.9)\",\n  borderStyle: \"dashed\",\n  borderWidth: \"thick\",\n  fontSize: \"3.5rem\",\n  textAlign: \"center\",\n  fontWeight: \"bold\",\n};\nconst mystyle2 = {\n  color: \"#000\",\n  padding: \"50px\",\n  backgroundColor: \"rgba(255,255,255,0.2)\",\n  borderColor: \"rgba(24,24,24,0.3)\",\n  borderStyle: \"dashed\",\n  borderWidth: \"thick\",\n  fontSize: \"3.5rem\",\n  textAlign: \"center\",\n  fontWeight: \"bold\",\n};\n\nexport {\n  styles,\n  mystyle1,\n  mystyle2\n}","const processRow = (i, row) => {\n  let finalVal = \"\";\n\n  let convertDescription = row.Descripcion.replace(/(\\n)/g, \" \");\n\n  finalVal += `[${i}]`;\n  finalVal += \"\\n\";\n  finalVal += `BienesTransp=${row.BienesTransp}`;\n  finalVal += \"\\n\";\n  finalVal += `Descripcion=${convertDescription}`;\n  finalVal += \"\\n\";\n  finalVal += `Cantidad=${row.Cantidad}`;\n  finalVal += \"\\n\";\n  finalVal += `ClaveUnidad=${row.ClaveUnidad}`;\n  finalVal += \"\\n\";\n  finalVal += `Unidad=${row.Unidad}`;\n  finalVal += \"\\n\";\n  finalVal += `CveMaterialPeligroso=${row.CveMaterialPeligroso}`;\n  finalVal += \"\\n\";\n  finalVal += `Embalaje=${row.Embalaje}`;\n  finalVal += \"\\n\";\n  finalVal += `DescripEmbalaje=${row.DescripEmbalaje}`;\n  finalVal += \"\\n\";\n  finalVal += `PesoEnKg=${row.PesoEnKg}`;\n  finalVal += \"\\n\";\n  finalVal += `ValorMercancia=${row.ValorMercancia}`;\n  finalVal += \"\\n\";\n  finalVal += `Moneda=${row.Moneda}`;\n  finalVal += \"\\n\";\n  finalVal += `FraccionArancelaria=${row.FraccionArancelaria}`;\n  finalVal += \"\\n\";\n  finalVal += `UUIDComercioExt=${row.UUIDComercioExt}`;\n  finalVal += \"\\n\";\n  finalVal += `Pedimentos=${row.Pedimentos}`;\n\n  return finalVal + \"\\n\";\n};\n\nconst getStorageValue = (key, defaultValue) => {\n  const saved = localStorage.getItem(key);\n  return saved\n}\n\nexport {\n  processRow,\n  getStorageValue\n}","import { useState, useEffect } from \"react\";\nimport { mystyle1, mystyle2 } from \"../css/styles\";\n\nimport { processRow, getStorageValue } from \"../utils/Functions\";\n\nexport const XMLReader = () => {\n\n  const [highlighted, setHighlighted] = useState(false);\n  const [conceptos, setConceptos] = useState([]);\n  const [nameFile, setNameFile] = useState('FileGenerated.ini');\n\n  useEffect(() => {\n    setNameFile(getStorageValue('nameFile', nameFile));\n  }, [nameFile]);\n  \n\n  const generateFile = async () => {\n    \n    let csvFile = \"\";\n    for (let i = 0; i < conceptos.length; i++) {\n      csvFile += processRow(i, conceptos[i]);\n    }\n\n    let time = new Date().getTime();\n    let blob = new Blob([csvFile], { type: \"text/plain;charset=utf-8;\" });\n\n    let nameFileSaved = nameFile;\n    console.log(nameFileSaved.split('.')[0])\n\n    if (navigator.msSaveBlob) {\n      // IE 10+\n      navigator.msSaveBlob(blob, `${nameFile.split('.')[0]}_${time}.${nameFile.split('.')[1]}`);\n      setConceptos([]);\n    } else {\n      let link = document.createElement(\"a\");\n      if (link.download !== undefined) {\n        // feature detection\n        // Browsers that support HTML5 download attribute\n        let url = URL.createObjectURL(blob);\n        link.setAttribute(\"href\", url);\n        link.setAttribute(\"download\", `${nameFile.split('.')[0]}_${time}.${nameFile.split('.')[1]}`);\n        link.style.visibility = \"hidden\";\n        document.body.appendChild(link);\n        link.click();\n        document.body.removeChild(link);\n\n        setConceptos([]);\n\n        setHighlighted(false);\n      }\n    }\n  };\n\n  const onDrop = files => {\n    Array.from(files)\n      .filter( file => file.type === \"text/xml\")\n      .forEach( async file => {\n        const text = await file.text();\n        let xmlContent = text;\n        let parser = new DOMParser();\n        let xmlDOM = parser.parseFromString(\n          xmlContent,\n          \"application/xml\"\n        );\n\n        xmlDOM.activeElement.children[2].childNodes.forEach(\n          (elNode) => {\n            if (elNode.nodeName === \"cfdi:Concepto\") {\n              let nodoActual = {\n                BienesTransp:\n                  elNode.attributes[\"ClaveProdServ\"].nodeValue,\n                Descripcion:\n                  elNode.attributes[\"Descripcion\"].nodeValue,\n                Cantidad: elNode.attributes[\"Cantidad\"].nodeValue,\n                ClaveUnidad:\n                  elNode.attributes[\"ClaveUnidad\"].nodeValue,\n                Unidad: elNode.attributes[\"Unidad\"].nodeValue,\n                CveMaterialPeligroso: \"\",\n                Embalaje: \"\",\n                DescripEmbalaje: \"\",\n                PesoEnKg: \"\",\n                ValorMercancia: \"\",\n                Moneda: \"\",\n                FraccionArancelaria: \"\",\n                UUIDComercioExt: \"\",\n                Pedimentos: \"\",\n              };\n              // console.log(nodoActual)\n              setConceptos( conceptos => [...conceptos, nodoActual]);\n            }\n          }\n        );\n      });\n  }\n\n  return (\n    <>\n      <div className=\"card text-white bg-secondary mb-3\">\n        <div className=\"card-header\">Área de Archivos</div>\n        <div className=\"card-body\">\n          <div\n            style={highlighted ? mystyle1 : mystyle2}\n            onDragEnter={() => {\n              setHighlighted(true);\n              setConceptos([]);\n            }}\n            onDragLeave={() => {\n              setHighlighted(false);\n            }}\n            onDragOver={ e => {\n              e.preventDefault();\n            }}\n            onDrop={ e => {\n              e.preventDefault();\n\n              onDrop(e.dataTransfer.files);\n            }}\n            onClick={ e => {\n              e.preventDefault();\n              document.getElementById(\"imgupload\").click();\n            }}\n          >\n            Coloca aquí tu archivo\n          </div>\n        </div>\n      </div>\n\n      <div className=\"w100\">\n        <label htmlFor=\"nameFile\">Nombre para archivo generado</label>\n        <input \n          type=\"text\" \n          id=\"nameFile\" \n          className=\"form-control mb-3\"\n          placeholder={'Default: ' + nameFile.split('.')[0]} \n          onInput={ e => {\n            let value = e.target.value;\n\n              value = value.replace(/ /g, \"_\");\n              setNameFile(`${value}.ini`);\n              localStorage.setItem(\"nameFile\", JSON.stringify(`${value}.ini`));\n          } }\n        />\n        <input \n          type=\"file\" \n          id=\"imgupload\" \n          style={{display: \"none\"}} \n          onClick={ () => setConceptos([]) }\n          onChange={ e => onDrop(e.target.files) } \n          multiple\n        />\n        <div className=\"d-grid gap-2\">\n          <button \n            className=\"btn btn-info btn\" \n            onClick={() => generateFile()}\n            disabled={ !conceptos.length > 0 ? true : false}\n          >\n            Generar Archivo\n          </button>\n        </div>\n      </div>\n\n      {conceptos.length > 0 && (\n        <div className=\"card text-white bg-primary mb-3 mt-3\">\n          <div className=\"card-header\">Vista previa</div>\n          <div className=\"card-body\">\n            <div className=\"card-text bg-light text-secondary\">\n              <ul>\n                {conceptos.map((concepto, i) => (\n                  <li style={{ listStyleType: \"none\" }} key={i}>\n                    [{i}]\n                    <br />\n                    BienesTransp={concepto.BienesTransp}\n                    <br />\n                    Descripcion={concepto.Descripcion}\n                    <br />\n                    Cantidad={concepto.Cantidad}\n                    <br />\n                    ClaveUnidad={concepto.ClaveUnidad}\n                    <br />\n                    Unidad={concepto.Unidad}\n                    <br />\n                    CveMaterialPeligroso={concepto.CveMaterialPeligroso}\n                    <br />\n                    Embalaje={concepto.Embalaje}\n                    <br />\n                    DescripEmbalaje={concepto.DescripEmbalaje}\n                    <br />\n                    PesoEnKg={concepto.PesoEnKg}\n                    <br />\n                    ValorMercancia={concepto.ValorMercancia}\n                    <br />\n                    Moneda={concepto.Moneda}\n                    <br />\n                    FraccionArancelaria={concepto.FraccionArancelaria}\n                    <br />\n                    UUIDComercioExt={concepto.UUIDComercioExt}\n                    <br />\n                    Pedimentos={concepto.Pedimentos}\n                    <br />\n                  </li>\n                ))}\n              </ul>\n            </div>\n          </div>\n        </div>\n      )}\n    </>\n  );\n};\n","import { useEffect } from \"react\";\nimport { Routes, Route } from \"react-router-dom\";\nimport { useNavigate } from \"react-router-dom\";\n\nimport { Navbar } from \"./Ui/Navbar\";\nimport { Login } from \"./Auth/Login\";\nimport { Register } from \"./Auth/Register\";\nimport { XMLReader } from \"./XMLReader\";\nimport { useUser } from \"../hooks/useUser\";\n\n\nexport const ReadXML = () => {\n  const { isLogged } = useUser()\n  const navigate = useNavigate();\n  \n  useEffect(() => {\n    if(isLogged) { navigate(\"/\")  }\n    // console.log(isLogged)\n  }, [isLogged, navigate])\n\n  return (\n    <>\n      <Navbar />\n      <div className=\"container mt-4\">\n        <Routes>\n          <Route path=\"/\" element={ isLogged ? <XMLReader /> : <Login /> } />\n          <Route path=\"/register\" element={<Register />} />\n          <Route path=\"/login\" element={<Login />} />\n          \n        </Routes>\n      </div>\n    </>\n  );\n};\n","import { ReadXML } from \"./components/ReadXML\";\nimport { BrowserRouter } from \"react-router-dom\";\nimport { UserContextProvider } from \"./context/UserContext\";\n\nfunction App() {\n  return (\n    <UserContextProvider>\n      <BrowserRouter>\n        <ReadXML />\n      </BrowserRouter>\n    </UserContextProvider>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}